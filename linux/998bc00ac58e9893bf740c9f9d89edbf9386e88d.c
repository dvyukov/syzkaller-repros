// BUG: unable to handle kernel paging request in vsock_diag_dump
// https://syzkaller.appspot.com/bug?id=998bc00ac58e9893bf740c9f9d89edbf9386e88d
// status:fixed
// autogenerated by syzkaller (http://github.com/google/syzkaller)

#define _GNU_SOURCE

#include <stdint.h>
#include <string.h>
#include <sys/syscall.h>
#include <unistd.h>

long r[6];
void loop()
{
  memset(r, -1, sizeof(r));
  r[0] = syscall(__NR_mmap, 0x20000000ul, 0xfff000ul, 0x3ul, 0x32ul,
                 0xfffffffffffffffful, 0x0ul);
  r[1] = syscall(__NR_socket, 0x10ul, 0x3ul, 0x4ul);
  *(uint64_t*)0x206a3ff0 = (uint64_t)0x202a6fa7;
  *(uint64_t*)0x206a3ff8 = (uint64_t)0x59;
  memcpy((void*)0x202a6fa7,
         "\x58\x00\x00\x00\x14\x00\x19\x23\x00\xa1\x4b\x00\x00\xda\xad"
         "\x56\x28\x06\x00\x00\x00\x23\xe0\x76\x00\x05\x43\xd8\x18\xfe"
         "\x00\x00\x00\x00\x00\x00\x71\x36\x64\x3e\x88\xea\x07\x00\x28"
         "\x04\x00\x00\x00\x00\x00\xfd\x00\x02\x00\x00\x06\x00\x00\x00"
         "\x00\x16\xe4\xed\x5e\x6e\x00\x00\x00\x00\x22\x00\x0c\x00\x01"
         "\x00\x06\xe8\x08\x00\x00\x00\x00\x00\x0f\x53\x00\x06\x4b",
         89);
  r[5] = syscall(__NR_writev, r[1], 0x206a3ff0ul, 0x1ul);
}

int main()
{
  loop();
  return 0;
}
