// BUG: using __this_cpu_read() in preemptible [ADDR] code: syzkaller2NUM/3350
// https://syzkaller.appspot.com/bug?id=56147396bc981a916049e36d11e448d5212447d7
// status:invalid
// autogenerated by syzkaller (http://github.com/google/syzkaller)

#define _GNU_SOURCE

#include <sys/syscall.h>
#include <unistd.h>

#include <stdint.h>
#include <string.h>

static void test();

void loop()
{
  while (1) {
    test();
  }
}

long r[60];
void test()
{
  memset(r, -1, sizeof(r));
  r[0] = syscall(__NR_mmap, 0x20000000ul, 0x903000ul, 0x3ul, 0x32ul,
                 0xfffffffffffffffful, 0x0ul);
  r[1] = syscall(__NR_socket, 0xful, 0x3ul, 0x2ul);
  *(uint64_t*)0x205f5000 = (uint64_t)0x0;
  *(uint32_t*)0x205f5008 = (uint32_t)0x0;
  *(uint64_t*)0x205f5010 = (uint64_t)0x208feff0;
  *(uint64_t*)0x205f5018 = (uint64_t)0x1;
  *(uint64_t*)0x205f5020 = (uint64_t)0x0;
  *(uint64_t*)0x205f5028 = (uint64_t)0x0;
  *(uint32_t*)0x205f5030 = (uint32_t)0x0;
  *(uint64_t*)0x208feff0 = (uint64_t)0x2017ffb0;
  *(uint64_t*)0x208feff8 = (uint64_t)0x50;
  *(uint8_t*)0x2017ffb0 = (uint8_t)0x2;
  *(uint8_t*)0x2017ffb1 = (uint8_t)0x3;
  *(uint8_t*)0x2017ffb2 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffb3 = (uint8_t)0x9;
  *(uint16_t*)0x2017ffb4 = (uint16_t)0xa;
  *(uint16_t*)0x2017ffb6 = (uint16_t)0x0;
  *(uint32_t*)0x2017ffb8 = (uint32_t)0x3;
  *(uint32_t*)0x2017ffbc = (uint32_t)0x0;
  *(uint16_t*)0x2017ffc0 = (uint16_t)0x3;
  *(uint16_t*)0x2017ffc2 = (uint16_t)0x6;
  *(uint8_t*)0x2017ffc4 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffc5 = (uint8_t)0x0;
  *(uint16_t*)0x2017ffc6 = (uint16_t)0x0;
  *(uint16_t*)0x2017ffc8 = (uint16_t)0x2;
  *(uint16_t*)0x2017ffca = (uint16_t)0x204e;
  *(uint32_t*)0x2017ffcc = (uint32_t)0x1020000;
  *(uint8_t*)0x2017ffd0 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd1 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd2 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd3 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd4 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd5 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd6 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffd7 = (uint8_t)0x0;
  *(uint16_t*)0x2017ffd8 = (uint16_t)0x2;
  *(uint16_t*)0x2017ffda = (uint16_t)0x1;
  *(uint32_t*)0x2017ffdc = (uint32_t)0x0;
  *(uint8_t*)0x2017ffe0 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffe1 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffe2 = (uint8_t)0x0;
  *(uint8_t*)0x2017ffe3 = (uint8_t)0x2;
  *(uint32_t*)0x2017ffe4 = (uint32_t)0x0;
  *(uint16_t*)0x2017ffe8 = (uint16_t)0x3;
  *(uint16_t*)0x2017ffea = (uint16_t)0x2000000005;
  *(uint8_t*)0x2017ffec = (uint8_t)0x0;
  *(uint8_t*)0x2017ffed = (uint8_t)0x0;
  *(uint16_t*)0x2017ffee = (uint16_t)0x0;
  *(uint16_t*)0x2017fff0 = (uint16_t)0x2;
  *(uint16_t*)0x2017fff2 = (uint16_t)0x204e;
  *(uint32_t*)0x2017fff4 = (uint32_t)0x100007f;
  *(uint8_t*)0x2017fff8 = (uint8_t)0x0;
  *(uint8_t*)0x2017fff9 = (uint8_t)0x0;
  *(uint8_t*)0x2017fffa = (uint8_t)0x0;
  *(uint8_t*)0x2017fffb = (uint8_t)0x0;
  *(uint8_t*)0x2017fffc = (uint8_t)0x0;
  *(uint8_t*)0x2017fffd = (uint8_t)0x0;
  *(uint8_t*)0x2017fffe = (uint8_t)0x0;
  *(uint8_t*)0x2017ffff = (uint8_t)0x0;
  r[59] = syscall(__NR_sendmsg, r[1], 0x205f5000ul, 0x0ul);
}

int main()
{
  loop();
  return 0;
}
